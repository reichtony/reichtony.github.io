<?php

return <<<'VALUE'
"namespace IPS\\Theme;\nclass class_core_admin_applications extends \\IPS\\Theme\\Template\n{\n\tpublic $cache_key = '365f3b06537aa514c04f6131a3ae9b26';\n\tfunction appRowTitle( $app ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\nCONTENT;\n$return .= htmlspecialchars( $app->_title, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n <span class='ipsType_small ipsType_unbold ipsType_light'>\nCONTENT;\n$return .= htmlspecialchars( $app->version, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/span>\n\nCONTENT;\n\nif ( in_array( $app->directory, \\IPS\\Application::$ipsApps ) ):\n$return .= <<<CONTENT\n\n<span class=' ipsBadge ipsBadge_positive'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'invision', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/span>\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction applicationWrapper( $tree, $lang ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\n<div class='acpBlock ipsSpacer_top'>\n\t<div class='ipsBox_titleBar'>\nCONTENT;\n\n$val = \"{$lang}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/div>\n\t{$tree}\n<\/div>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction codeHookEditor( $id, $action, $elements, $hiddenValues, $actionButtons, $uploadField, $class='', $attributes=array(), $sidebar ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n<form accept-charset='utf-8' class=\"ipsForm \nCONTENT;\n$return .= htmlspecialchars( $class, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" action=\"\nCONTENT;\n$return .= htmlspecialchars( $action, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" method=\"post\" \nCONTENT;\n\nif ( $uploadField ):\n$return .= <<<CONTENT\nenctype=\"multipart\/form-data\"\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n \nCONTENT;\n\nforeach ( $attributes as $k => $v ):\n$return .= <<<CONTENT\n\nCONTENT;\n$return .= htmlspecialchars( $k, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n=\"\nCONTENT;\n$return .= htmlspecialchars( $v, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\"\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n data-ipsForm>\n\t<input type=\"hidden\" name=\"\nCONTENT;\n$return .= htmlspecialchars( $id, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n_submitted\" value=\"1\">\n\t\nCONTENT;\n\nforeach ( $hiddenValues as $k => $v ):\n$return .= <<<CONTENT\n\n\t\t<input type=\"hidden\" name=\"\nCONTENT;\n$return .= htmlspecialchars( $k, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" value=\"\nCONTENT;\n$return .= htmlspecialchars( $v, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\n\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\nCONTENT;\n\nif ( $uploadField ):\n$return .= <<<CONTENT\n\n\t\t<input type=\"hidden\" name=\"MAX_FILE_SIZE\" value=\"\nCONTENT;\n$return .= htmlspecialchars( $uploadField, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\n\t\t<input type=\"hidden\" name=\"plupload\" value=\"\nCONTENT;\n\n$return .= htmlspecialchars( md5( mt_rand() ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\n\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\nCONTENT;\n\nforeach ( $elements as $collection ):\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\nforeach ( $collection as $input ):\n$return .= <<<CONTENT\n\n\t\t\t\nCONTENT;\n\nif ( $input->error ):\n$return .= <<<CONTENT\n\n\t\t\t\t<div class=\"ipsPad ipsAreaBackground_light\">\n\t\t\t\t\t<p class='ipsMessage ipsMessage_error'>\nCONTENT;\n\n$val = \"{$input->error}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/p>\n\t\t\t\t<\/div>\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t<section class='ipsAreaBackground_light ipsPad_half' id='elCodeHookEditor' data-controller='core.admin.system.codeHook'>\n\t\t<div class=\"ipsColumns ipsColumns_collapsePhone\">\n\t\t\t<div class=\"ipsColumn ipsColumn_wide\">\n\t\t\t\t\nCONTENT;\n\n$return .= array_pop( $sidebar );\n$return .= <<<CONTENT\n\n\t\t\t<\/div>\n\t\t\t<div class='ipsColumn ipsColumn_fluid'>\n\t\t\t\t\nCONTENT;\n\nforeach ( $elements as $collection ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\nforeach ( $collection as $input ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t{$input->html()}\n\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t<\/div>\n\t\t<\/div>\n\n\t\t<div class=\"ipsAreaBackground_light ipsClearfix ipsType_center\">\n\t\t\t\nCONTENT;\n\nforeach ( $actionButtons as $button ):\n$return .= <<<CONTENT\n\n\t\t\t\t{$button}\n\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t<\/div>\n\t<\/section>\n<\/form>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction codeHookSidebar( $data ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n<div class=\"cHookEditor_sidebar ipsScrollbar ipsSideMenu\">\n\t\t\nCONTENT;\n\nforeach ( $data as $className => $constructs ):\n$return .= <<<CONTENT\n\n\t\t\t<h3 class='ipsType_reset ipsAreaBackground ipsPad_half'>\nCONTENT;\n$return .= htmlspecialchars( $className, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/h3>\n\t\t\t<br>\n\t\t\t\nCONTENT;\n\nif ( isset( $constructs['properties'] ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t<h4 class='ipsSideMenu_title'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'plugin_hook_properties', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h4>\n\t\t\t\t<ul class=\"ipsSideMenu_list\">\n\t\t\t\t\t\nCONTENT;\n\nforeach ( $constructs['properties'] as $property ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<li class=\"ipsSideMenu_item\" data-signature='\nCONTENT;\n$return .= htmlspecialchars( $property->signature, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' data-codeToInject='\nCONTENT;\n$return .= htmlspecialchars( $property->codeToInject, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\n\t\t\t\t\t\t\t<a href='#'>\n\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $property->isPublic() ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t<i class=\"fa fa-circle-o\" title=\"public\"><\/i>\n\t\t\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t<i class=\"fa fa-circle\" title=\"protected\"><\/i>\n\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $property->isStatic() ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\tstatic\n\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t$\nCONTENT;\n$return .= htmlspecialchars( $property->getName(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<\/a>\n\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t<\/ul>\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\nCONTENT;\n\nif ( isset( $constructs['methods'] ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t<h4 class='ipsSideMenu_title'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'plugin_hook_methods', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h4>\n\t\t\t\t<ul class=\"ipsSideMenu_list\">\n\t\t\t\t\t\nCONTENT;\n\nforeach ( $constructs['methods'] as $method ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<li class=\"ipsSideMenu_item\" data-signature='\nCONTENT;\n$return .= htmlspecialchars( $method->signature, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' data-codeToInject='\nCONTENT;\n$return .= htmlspecialchars( $method->codeToInject, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\n\t\t\t\t\t\t\t<a href='#'>\n\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $method->isPublic() ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t<i class=\"fa fa-circle-o\" title=\"public\"><\/i>\n\t\t\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t<i class=\"fa fa-circle\" title=\"protected\"><\/i>\n\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $method->isFinal() ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\tfinal\n\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $method->isStatic() ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\tstatic\n\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $method->isAbstract() ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\tabstract\n\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\nCONTENT;\n\nif ( !$method->getNumberOfParameters() ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\nCONTENT;\n$return .= htmlspecialchars( $method->getName(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n()\n\t\t\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( !$method->getNumberOfRequiredParameters() ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n$return .= htmlspecialchars( $method->getName(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n( \nCONTENT;\n$return .= htmlspecialchars( $method->getNumberOfParameters(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n )\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nelseif ( $method->getNumberOfParameters() != $method->getNumberOfRequiredParameters() ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n$return .= htmlspecialchars( $method->getName(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n( \nCONTENT;\n$return .= htmlspecialchars( $method->getNumberOfRequiredParameters(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n [, \nCONTENT;\n\n$return .= htmlspecialchars( $method->getNumberOfParameters() - $method->getNumberOfRequiredParameters(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n ] )\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\nCONTENT;\n$return .= htmlspecialchars( $method->getName(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n( [ \nCONTENT;\n$return .= htmlspecialchars( $method->getNumberOfParameters(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n ] )\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<\/a>\n\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t<\/ul>\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t<\/ul>\n<\/div>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction details( $application, $lastUpgrade ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n<table class='ipsTable'>\n\t<tr>\n\t\t<td class=\"field_title\">\n\t\t\t<strong class=\"title\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'app_details_app_title', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/strong>\n\t\t<\/td>\n\t\t<td class=\"field_field\">\n\t\t\t\nCONTENT;\n\n$val = \"__app_{$application->directory}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t<\/td>\n\t<\/tr>\n\t<tr>\n\t\t<td class=\"field_title\">\n\t\t\t<strong class=\"title\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'app_details_app_version', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/strong>\n\t\t<\/td>\n\t\t<td class=\"field_field\">\n\t\t\t\nCONTENT;\n\n$sprintf = array($application->version, $application->long_version); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'app_version_string', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n\n\t\t<\/td>\n\t<\/tr>\n\t<tr>\n\t\t<td class=\"field_title\">\n\t\t\t<strong class=\"title\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'app_details_app_author', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/strong>\n\t\t<\/td>\n\t\t<td class=\"field_field\">\n\t\t\t\nCONTENT;\n$return .= htmlspecialchars( $application->author, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\nCONTENT;\n\nif ( $application->website ):\n$return .= <<<CONTENT\n <a href='\nCONTENT;\n$return .= htmlspecialchars( $application->website, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' target='_blank'><i class=\"fa fa-external-link-square\" title='\nCONTENT;\n$return .= htmlspecialchars( $application->website, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'><\/i><\/a>\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t<\/td>\n\t<\/tr>\n\t<tr>\n\t\t<td class=\"field_title\">\n\t\t\t<strong class=\"title\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'app_details_app_installed', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/strong>\n\t\t<\/td>\n\t\t<td class=\"field_field\">\n\t\t\t\nCONTENT;\n\n$val = ( $application->added instanceof \\IPS\\DateTime ) ? $application->added : \\IPS\\DateTime::ts( $application->added );$return .= $val->html();\n$return .= <<<CONTENT\n\n\t\t<\/td>\n\t<\/tr>\n\t\nCONTENT;\n\nif ( $lastUpgrade !== NULL ):\n$return .= <<<CONTENT\n\n\t<tr>\n\t\t<td class=\"field_title\">\n\t\t\t<strong class=\"title\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'app_details_app_updated', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/strong>\n\t\t<\/td>\n\t\t<td class=\"field_field\">\n\t\t\t\nCONTENT;\n\n$val = ( $lastUpgrade instanceof \\IPS\\DateTime ) ? $lastUpgrade : \\IPS\\DateTime::ts( $lastUpgrade );$return .= $val->html();\n$return .= <<<CONTENT\n\n\t\t<\/td>\n\t<\/tr>\n\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n<\/table>\n\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction enhancements( $rows ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n<div id='acpEnhancements'>\n\t<h2 class='ipsType_pageTitle'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'enhancements_ips', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h2>\n\t<br>\n\n\t<ul class='ipsGrid ipsGrid_collapsePhone ipsSpacer_bottom ipsSpacer_double' data-ipsGrid data-ipsGrid-minItemSize='320' data-ipsGrid-maxItemSize='500' data-ipsGrid-equalHeights='row'>\n\t\t\nCONTENT;\n\nforeach ( $rows[1] as $key => $data ):\n$return .= <<<CONTENT\n\n\t\t\t<li class='ipsBox ipsGrid_span4 acpEnhancement  \nCONTENT;\n\nif ( $data['enabled'] == 1 ):\n$return .= <<<CONTENT\nacpEnhancement_enabled\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n'>\n\t\t\t\t\nCONTENT;\n\nif ( $data['enabled'] == 1 ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<span class='ipsBadge ipsBadge_icon ipsBadge_positive' data-ipsTooltip title='\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'enabled', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n'><i class='fa fa-check'><\/i><\/span>\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nif ( $data['icon'] != \"\" ):\n$return .= <<<CONTENT\n<img src='\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->resource( \"enhancements\/{$data['icon']}\", \"core\", 'admin', false );\n$return .= <<<CONTENT\n' class='acpEnhancement_logo ipsPos_right'>\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t<h3 class='ipsBox_titleBar'>\nCONTENT;\n\n$val = \"{$data['title']}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h3>\n\t\t\t\t<div class='ipsType_normal ipsPad'>\n\t\t\t\t\t\nCONTENT;\n\nif ( $data['description'] ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<div class='ipsType_richText'>\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\n$val = \"{$data['description']}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<\/p>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t<ul class='ipsGrid acpEnhancement_buttons'>\n\t\t\t\t\t\t<li class='\nCONTENT;\n\nif ( $data['config'] && $data['enabled'] == 1 ):\n$return .= <<<CONTENT\nipsGrid_span6\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\nipsGrid_span12\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n'>\n\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $data['enabled'] == 1 ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t<a href='\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=applications&controller=enhancements&do=enableToggle&id={$key}&status=0\", null, \"\", array(), 0 ) );\n$return .= <<<CONTENT\n' class='ipsButton ipsButton_fullWidth ipsButton_medium ipsButton_light' data-keyAction='t'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'disable', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t<a href='\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=applications&controller=enhancements&do=enableToggle&id={$key}&status=1\", null, \"\", array(), 0 ) );\n$return .= <<<CONTENT\n' class='ipsButton ipsButton_fullWidth ipsButton_medium ipsButton_primary' data-keyAction='t'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'enable', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\nCONTENT;\n\nif ( $data['config'] && $data['enabled'] == 1 ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<li class='ipsGrid_span6'>\n\t\t\t\t\t\t\t\t<a href='\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=applications&controller=enhancements&do=edit&id={$key}\", null, \"\", array(), 0 ) );\n$return .= <<<CONTENT\n' class='ipsButton ipsButton_fullWidth ipsButton_light ipsButton_medium'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'enhancements_configure', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t<\/ul>\n\t\t\t\t<\/div>\n\t\t\t<\/li>\n\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t<\/ul>\n\n\t<h2 class='ipsType_pageTitle'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'enhancements_thirdparty', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h2>\n\t<br>\n\n\t<ul class='ipsGrid ipsGrid_collapsePhone' data-ipsGrid data-ipsGrid-minItemSize='320' data-ipsGrid-maxItemSize='500' data-ipsGrid-equalHeights='row'>\n\t\t\nCONTENT;\n\nforeach ( $rows[0] as $key => $data ):\n$return .= <<<CONTENT\n\n\t\t\t<li class='ipsBox ipsGrid_span4 acpEnhancement \nCONTENT;\n\nif ( $data['enabled'] == 1 ):\n$return .= <<<CONTENT\nacpEnhancement_enabled\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n'>\n\t\t\t\t\nCONTENT;\n\nif ( $data['enabled'] == 1 ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<span class='ipsBadge ipsBadge_icon ipsBadge_positive' data-ipsTooltip title='\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'enabled', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n'><i class='fa fa-check'><\/i><\/span>\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nif ( $data['icon']  ):\n$return .= <<<CONTENT\n<img src='\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->resource( \"enhancements\/{$data['icon']}\", \"{$data['app']}\", 'admin', false );\n$return .= <<<CONTENT\n' class='acpEnhancement_logo ipsPos_right'>\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t<h3 class='ipsBox_titleBar'>\nCONTENT;\n\n$val = \"{$data['title']}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/h3>\n\t\t\t\t<div class='ipsType_normal ipsPad'>\n\t\t\t\t\t\nCONTENT;\n\nif ( $data['description'] ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<div class='ipsType_richText'>\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\n$val = \"{$data['description']}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<\/p>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t<ul class='ipsGrid acpEnhancement_buttons'>\n\t\t\t\t\t\t<li class='\nCONTENT;\n\nif ( $data['config'] && $data['enabled'] == 1 ):\n$return .= <<<CONTENT\nipsGrid_span6\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\nipsGrid_span12\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n'>\n\t\t\t\t\t\t\t\nCONTENT;\n\nif ( $data['enabled'] == 1 ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t<a href='\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=applications&controller=enhancements&do=enableToggle&id={$key}&status=0\", null, \"\", array(), 0 ) );\n$return .= <<<CONTENT\n' class='ipsButton ipsButton_fullWidth ipsButton_medium ipsButton_light'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'disable', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t<a href='\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=applications&controller=enhancements&do=enableToggle&id={$key}&status=1\", null, \"\", array(), 0 ) );\n$return .= <<<CONTENT\n' class='ipsButton ipsButton_fullWidth ipsButton_medium ipsButton_primary'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'enable', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\nCONTENT;\n\nif ( $data['config'] && $data['enabled'] == 1 ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<li class='ipsGrid_span6'>\n\t\t\t\t\t\t\t\t<a href='\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=applications&controller=enhancements&do=edit&id={$key}\", null, \"\", array(), 0 ) );\n$return .= <<<CONTENT\n' class='ipsButton ipsButton_fullWidth ipsButton_light ipsButton_medium'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'enhancements_configure', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t<\/ul>\n\t\t\t\t<\/div>\n\t\t\t<\/li>\n\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t<\/ul>\n<\/div>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction menuItem( $item, $id ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\n<div class='cMenuManager_leaf' data-role=\"menuItem\" data-itemID='\nCONTENT;\n$return .= htmlspecialchars( $id, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\n\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"applications\", \"core\" )->menuItemTools( $item, $id );\n$return .= <<<CONTENT\n\n\t<h3 class='cMenuManager_leafTitle'>\nCONTENT;\n$return .= htmlspecialchars( $item->title(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/h3>\n<\/div>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction menuItemTools( $item, $id ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\nCONTENT;\n\n$children = $item->children();\n$return .= <<<CONTENT\n\n\n<ul class='ipsList_inline ipsPos_right cMenuManager_tools'>\n\t<li class='ipsJS_hide'>\n\t\t<a href='\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=applications&controller=menu&do=form&id={$id}\", null, \"\", array(), 0 ) );\n$return .= <<<CONTENT\n' data-ipsTooltip title='\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'edit_menu_item', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n' data-action='editItem'>\n\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'edit', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t<\/a>\n\t<\/li>\n\t\nCONTENT;\n\nif ( $item instanceof \\IPS\\core\\extensions\\core\\FrontNavigation\\Menu ):\n$return .= <<<CONTENT\n\n\t\t<li>\n\t\t\t<a href='#' data-action='editDropdown' data-ipsTooltip title='\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'menu_manager_dropdown_edit', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n' class='ipsType_blendLinks'>\n\t\t\t\t<i class='fa fa-server'><\/i> <i class='fa fa-caret-right'><\/i>\n\t\t\t<\/a>\n\t\t<\/li>\n\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t<li>\n\t\t<a href='\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=applications&controller=menu&do=remove&id={$id}\", null, \"\", array(), 0 ) );\n$return .= <<<CONTENT\n' data-action='removeItem' data-ipsTooltip title='\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'menu_manager_dropdown_delete', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n' class='ipsType_blendLinks'>\n\t\t\t<i class='fa fa-times'><\/i><\/i>\n\t\t<\/a>\n\t<\/li>\n<\/ul>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction menuManager( $items, $menus ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\n<div data-controller='core.admin.system.menuManager'>\n\t<div class='cMenuManager_preview ipsResponsive_hidePhone' data-role='preview'>\n\t\t<h2 class='ipsType_reset'>\n\t\t\t<a href='#' data-action='previewToggle' class='ipsPos_right'>\n\t\t\t\t<span class='ipsHide' data-role='closePreview'>&times;<\/span>\n\t\t\t\t<i class='fa fa-chevron-up' data-role='openPreview'><\/i>\n\t\t\t<\/a>\n\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'menu_manager_live_preview', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t&nbsp;&nbsp;&nbsp;\n\t\t\t\nCONTENT;\n\n$themes = \\IPS\\Theme::getThemesWithAccessPermission();\n$return .= <<<CONTENT\n\n\t\t\t\nCONTENT;\n\nif ( count ( $themes ) > 1  ):\n$return .= <<<CONTENT\n\n\t\t\t\t<a href='#elPreviewTheme_menu' id='elPreviewTheme' data-ipsMenu data-ipsMenu-above class='ipsType_medium ipsType_light'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'menu_manager_preview_theme', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n <i class='fa fa-caret-down'><\/i><\/a>\n\t\t\t\t<ul id='elPreviewTheme_menu' class='ipsMenu ipsMenu_selectable ipsHide'>\n\t\t\t\t\nCONTENT;\n\nforeach ( $themes as $id => $set  ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<li class='ipsMenu_item\nCONTENT;\n\nif ( ( isset( \\IPS\\Request::i()->previewThemeId ) and $id == \\IPS\\Request::i()->previewThemeId ) or ( !isset( \\IPS\\Request::i()->previewThemeId ) and $id == \\IPS\\Theme::i()->id ) ):\n$return .= <<<CONTENT\n ipsMenu_itemChecked\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n'>\n\t\t\t\t\t\t<a href=\"\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=applications&controller=menu&previewThemeId={$id}\", null, \"\", array(), 0 ) );\n$return .= <<<CONTENT\n\">\nCONTENT;\n$return .= htmlspecialchars( $set->_title, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t<\/li>\n\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t<\/ul>\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t<\/h2>\n\t\t<div data-role='previewBody'>\n\t\t\t\nCONTENT;\n\nif ( $previewThemeId = \\IPS\\Request::i()->previewThemeId ):\n$return .= <<<CONTENT\n\n\t\t\t\t<iframe src=\"\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=system&controller=ajax&do=menuPreview&theme={$previewThemeId}\", \"front\", \"\", array(), 0 ) );\n$return .= <<<CONTENT\n\"><\/iframe>\n\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t<iframe src=\"\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=system&controller=ajax&do=menuPreview\", \"front\", \"\", array(), 0 ) );\n$return .= <<<CONTENT\n\"><\/iframe>\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t<\/div>\n\t<\/div>\n\t<div class='cMenuManager'>\n\t\t<div class='ipsColumns ipsColumns_collapsePhone'>\n\t\t\t<div class='ipsColumn ipsColumn_veryWide cMenuManager_column'>\n\t\t\t\t<div class='cMenuManager_editorWrapper'>\n\t\t\t\t\t<div class='cMenuManager_main' data-manager='main'>\n\t\t\t\t\t\t<div class='ipsSpacer_bottom'>\n\t\t\t\t\t\t\t<p class='ipsType_reset ipsType_light ipsType_medium ipsType_center ipsSpacer_bottom ipsSpacer_half'>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'menu_manager_publish_desc', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<\/p>\n\t\t\t\t\t\t\t<a href='\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=applications&controller=menu&do=publish\", null, \"\", array(), 0 ) );\n$return .= <<<CONTENT\n' class='ipsButton ipsButton_primary ipsButton_fullWidth ipsButton_medium \nCONTENT;\n\nif ( ( isset( \\IPS\\Data\\Store::i()->frontNavigation ) && \\IPS\\Data\\Store::i()->frontNavigation == \\IPS\\core\\FrontNavigation::frontNavigation( TRUE ) ) ):\n$return .= <<<CONTENT\nipsButton_disabled\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n' data-action='publishMenu'><i class='fa fa-cloud-upload'><\/i> \nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'menu_manager_publish', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t<hr class='ipsHr'>\n\t\t\t\t\t\t<ul class='ipsList_inline ipsClearfix'>\n\t\t\t\t\t\t\t<li class='ipsPos_right'>\n\t\t\t\t\t\t\t\t<a href=\"\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=applications&controller=menu&do=form&parent=0\", null, \"\", array(), 0 ) );\n$return .= <<<CONTENT\n\" class='ipsButton ipsButton_verySmall ipsButton_alternate' data-ipsTooltip title='\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'add_menu_item', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n' data-action='newItem'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'add_menu_item_short', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t<\/ul>\n\t\t\t\t\t\t<h2 class='ipsType_sectionHead ipsSpacer_top ipsSpacer_half'>\n\t\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'menu_manager_main_menu', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<\/h2>\n\n\t\t\t\t\t\t<div class='cMenuManager_root'>\n\t\t\t\t\t\t\t<ol data-bar-id='0' class='cMenuManager_branch'>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nforeach ( $items[0] as $id => $item ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t<li id='menu_\nCONTENT;\n$return .= htmlspecialchars( $id, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' data-role='menuNode'>\n\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"applications\", \"core\" )->menuItem( $item, $id );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t<ol>\n\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( isset( $items[ $id ] ) && count( $items[ $id ] ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nforeach ( $items[ $id ] as $cid => $citem ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t<li id='menu_\nCONTENT;\n$return .= htmlspecialchars( $cid, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' data-role='menuNode'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"applications\", \"core\" )->menuItem( $citem, $cid );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t\t<\/ol>\n\t\t\t\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<\/ol>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t<\/div>\n\t\t\t\t\t<div class='cMenuManager_dropdown ipsHide' data-manager='dropdown'>\n\t\t\t\t\t\t\nCONTENT;\n\nforeach ( $menus as $id => $item ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"applications\", \"core\" )->menuManagerDropdown( $item, $id, 0 );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t\t<\/div>\n\t\t\t\t<\/div>\n\t\t\t<\/div>\n\t\t\t<div class='ipsColumn ipsColumn_fluid cMenuManager_form' data-role='editForm' id='elMenuManager_formColumn'>\n\t\t\t\t\n\t\t\t<\/div>\n\t\t<\/div>\n\t<\/div>\n<\/div>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction menuManagerDropdown( $item, $id, $parent ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\nCONTENT;\n\n$children = $item->children( TRUE );\n$return .= <<<CONTENT\n\n\nCONTENT;\n\nif ( $children !== NULL ):\n$return .= <<<CONTENT\n\n\t<div data-dropdownID='\nCONTENT;\n$return .= htmlspecialchars( $id, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\n\t\t<ul class='ipsList_inline ipsList_noSpacing ipsClearfix'>\n\t\t\t<li class='ipsPos_right'>\n\t\t\t\t<a href=\"\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=applications&controller=menu&do=form&parent={$id}\", null, \"\", array(), 0 ) );\n$return .= <<<CONTENT\n\" class='ipsButton ipsButton_verySmall ipsButton_alternate' data-ipsTooltip title='\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'add_menu_item', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n' data-action='newDropdown'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'add_menu_item_short', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t<\/li>\n\t\t\t<li>\n\t\t\t\t\nCONTENT;\n\nif ( $parent ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<a href='#' class='ipsButton ipsButton_link ipsButton_narrow ipsButton_verySmall' data-action='navBack' data-parentID='\nCONTENT;\n$return .= htmlspecialchars( $parent->id, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'><i class='fa fa-chevron-left'><\/i> \nCONTENT;\n\n$sprintf = array($parent->title()); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'menu_manager_back_to', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t<a href='#' class='ipsButton ipsButton_link ipsButton_narrow ipsButton_verySmall' data-action='navBack' data-parentID='0'><i class='fa fa-chevron-left'><\/i> \nCONTENT;\n\n$sprintf = array(\\IPS\\Member::loggedIn()->language()->addToStack('menu_manager_main_menu')); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'menu_manager_back_to', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t<\/li>\n\t\t<\/ul>\n\t\t<h2 class='ipsType_sectionHead ipsSpacer_top ipsSpacer_half'>\n\t\t\t\nCONTENT;\n\n$sprintf = array($item->title()); $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'menu_manager_dropdown_for', ENT_DISALLOWED, 'UTF-8', FALSE ), FALSE, array( 'sprintf' => $sprintf ) );\n$return .= <<<CONTENT\n\n\t\t<\/h2>\n\n\t\t<ol id=\"elDropDownMenu_\nCONTENT;\n$return .= htmlspecialchars( $id, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-menuID='\nCONTENT;\n$return .= htmlspecialchars( $id, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' class=\"ipsList_reset ipsMenu ipsMenu_auto ipsMenu_bottomCenter\">\n\t\t\t\nCONTENT;\n\nif ( count( $children ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nforeach ( $children as $cid => $citem ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"applications\", \"core\" )->menuManagerDropdownItem( $citem, $cid );\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t<li class='cMenuManager_emptyList ipsType_light ipsType_center'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'menu_manager_list', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/li>\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t<\/ol>\n\t<\/div>\n\t\nCONTENT;\n\n$parent = $item;\n$return .= <<<CONTENT\n\n\t\nCONTENT;\n\nforeach ( $children as $i => $_items ):\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\nforeach ( $_items as $id => $item ):\n$return .= <<<CONTENT\n\n\t\t\t\nCONTENT;\n\nif ( $item instanceof \\IPS\\core\\extensions\\core\\FrontNavigation\\Menu ):\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"applications\", \"core\" )->menuManagerDropdown( $item, $id, $parent );\n$return .= <<<CONTENT\n\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction menuManagerDropdownItem( $citem, $cid ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\n<li class='ipsMenu_item' data-role='menuItem' id='menu_\nCONTENT;\n$return .= htmlspecialchars( $cid, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' data-itemID='\nCONTENT;\n$return .= htmlspecialchars( $cid, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\n\t<div>\n\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"applications\", \"core\" )->menuItemTools( $citem, $cid );\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n$return .= htmlspecialchars( $citem->title(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\n\t<\/div>\n<\/li>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction menuManagerForm( $id, $action, $elements, $hiddenValues, $actionButtons, $uploadField, $class='', $attributes=array(), $sidebar, $form=NULL ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\n<div>\n\t<div>\n\t\t<form accept-charset='utf-8' class=\"ipsForm \nCONTENT;\n$return .= htmlspecialchars( $class, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" action=\"\nCONTENT;\n$return .= htmlspecialchars( $action, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" method=\"post\" \nCONTENT;\n\nif ( $uploadField ):\n$return .= <<<CONTENT\nenctype=\"multipart\/form-data\"\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n \nCONTENT;\n\nforeach ( $attributes as $k => $v ):\n$return .= <<<CONTENT\n\nCONTENT;\n$return .= htmlspecialchars( $k, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n=\"\nCONTENT;\n$return .= htmlspecialchars( $v, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\"\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n data-ipsForm data-itemID='\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Request::i()->id, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\n\t\t\t<input type=\"hidden\" name=\"\nCONTENT;\n$return .= htmlspecialchars( $id, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n_submitted\" value=\"1\">\n\t\t\t\nCONTENT;\n\nforeach ( $hiddenValues as $k => $v ):\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nif ( is_array($v) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\nforeach ( $v as $_k => $_v ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<input type=\"hidden\" name=\"\nCONTENT;\n$return .= htmlspecialchars( $k, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n[\nCONTENT;\n$return .= htmlspecialchars( $_k, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n]\" value=\"\nCONTENT;\n$return .= htmlspecialchars( $_v, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\n\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t<input type=\"hidden\" name=\"\nCONTENT;\n$return .= htmlspecialchars( $k, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" value=\"\nCONTENT;\n$return .= htmlspecialchars( $v, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\nCONTENT;\n\nif ( $uploadField ):\n$return .= <<<CONTENT\n\n\t\t\t\t<input type=\"hidden\" name=\"MAX_FILE_SIZE\" value=\"\nCONTENT;\n$return .= htmlspecialchars( $uploadField, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\n\t\t\t\t<input type=\"hidden\" name=\"plupload\" value=\"\nCONTENT;\n\n$return .= htmlspecialchars( md5( mt_rand() ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\n\t\t\t\nCONTENT;\n\nif ( isset( $elements['']['menu_manager_extension']) ):\n$return .= <<<CONTENT\n\n\t\t\t\t<div class='ipsFieldRow_section'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'menu_item_type', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/div>\n\t\t\t\t\nCONTENT;\n\n$elem = $elements['']['menu_manager_extension'];\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\n$options = $elem->options['options'];\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\n$leftOver = count( $options ) % 3;\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\n$perCol1 = $perCol2 = $perCol3 = ( count( $options ) - $leftOver ) \/ 3;\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nif ( $leftOver >= 1 ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\n$perCol1++;\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nelseif ( $leftOver == 2 ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\n$perCol2++;\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t<div class='ipsPad ipsAreaBackground_reset'>\n\t\t\t\t\t<div class='ipsGrid ipsGrid_collapsePhone' data-ipsSideMenu data-ipsSideMenu-type='radio'>\n\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"applications\", \"core\" )->menuManagerTypeColumn( array_slice( $options, 0, $perCol1 ), $elem->value, $elem->options['disabled'], $elem->options['toggles'] );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"applications\", \"core\" )->menuManagerTypeColumn( array_slice( $options, $perCol1, $perCol2 ), $elem->value, $elem->options['disabled'], $elem->options['toggles'] );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"applications\", \"core\" )->menuManagerTypeColumn( array_slice( $options, ( $perCol1 + $perCol2 ) ), $elem->value, $elem->options['disabled'], $elem->options['toggles'] );\n$return .= <<<CONTENT\n\n\t\t\t\t\t<\/div>\n\t\t\t\t<\/div>\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t<div class='ipsFieldRow_section'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'menu_configuration', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/div>\n\t\t\t<ul class='ipsList_reset ipsPad ipsAreaBackground_reset'>\n\t\t\t\t\nCONTENT;\n\nforeach ( $elements as $collection ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\nforeach ( $collection as $inputName => $input ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\nCONTENT;\n\nif ( $inputName !== 'menu_manager_extension' ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\nCONTENT;\n\nif ( is_object( $input )  ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t{$input->rowHtml($form)}\n\t\t\t\t\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t{$input}\n\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t<\/ul>\n\t\t\t<ul class=\"ipsPad ipsType_center ipsList_reset ipsClearfix ipsAreaBackground_light\">\n\t\t\t\t\nCONTENT;\n\nforeach ( $actionButtons as $button ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t<li>{$button}<\/li>\n\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t<\/ul>\n\t\t<\/form>\n\t<\/div>\n<\/div>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction menuManagerTypeColumn( $items, $value, $disabled, $toggles ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\n<div class='ipsGrid_span4'>\n\t<ul class='ipsSideMenu_list ipsSideMenu_withRadios' role='radiogroup'>\n\t\t\nCONTENT;\n\nforeach ( $items as $k => $option ):\n$return .= <<<CONTENT\n\n\t\t\t<li \nCONTENT;\n\nif ( $disabled === TRUE or ( is_array( $disabled ) and in_array( $k, $disabled ) ) ):\n$return .= <<<CONTENT\ntitle=\"\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'menu_manager_feature_disabled', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\" data-ipsTooltip\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n>\n\t\t\t\t<a href='#' class='ipsSideMenu_item \nCONTENT;\n\nif ( (string) $value == (string) $k ):\n$return .= <<<CONTENT\nipsSideMenu_itemActive\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n \nCONTENT;\n\nif ( $disabled === TRUE or ( is_array( $disabled ) and in_array( $k, $disabled ) ) ):\n$return .= <<<CONTENT\nipsSideMenu_itemDisabled\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n' data-ipsMenuValue='\nCONTENT;\n$return .= htmlspecialchars( $k, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' id='elRadioType_\nCONTENT;\n$return .= htmlspecialchars( $k, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\n\t\t\t\t\t<input type=\"radio\" name=\"menu_manager_extension\" value=\"\nCONTENT;\n$return .= htmlspecialchars( $k, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" \nCONTENT;\n\nif ( (string) $value == (string) $k ):\n$return .= <<<CONTENT\nchecked\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n \nCONTENT;\n\nif ( $disabled === TRUE or ( is_array( $disabled ) and in_array( $k, $disabled ) ) ):\n$return .= <<<CONTENT\ndisabled\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n \nCONTENT;\n\nif ( isset( $toggles[ $k ] ) and !empty( $toggles[ $k ] ) ):\n$return .= <<<CONTENT\ndata-control=\"toggle\" data-toggles=\"\nCONTENT;\n\n$return .= htmlspecialchars( implode( ',', $toggles[ $k ] ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" data-toggle-visibleCheck=\"#elRadioType_\nCONTENT;\n$return .= htmlspecialchars( $k, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" \nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n id=\"elRadio_menu_manager_extension_\nCONTENT;\n$return .= htmlspecialchars( $k, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\n\t\t\t\t\t<label for='elMenuManagerExtension_\nCONTENT;\n$return .= htmlspecialchars( $k, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\nCONTENT;\n\n$val = \"{$option}\"; $return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( $val, ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/label>\n\t\t\t\t<\/a>\n\t\t\t<\/li>\n\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t<\/ul>\n<\/div>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction menuPreviewWrapper( $html, $title=NULL ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n<!DOCTYPE html>\n<html lang=\"\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Member::loggedIn()->language()->bcp47(), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\" dir=\"\nCONTENT;\n\nif ( \\IPS\\Member::loggedIn()->language()->isrtl ):\n$return .= <<<CONTENT\nrtl\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\nltr\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\">\n\t<head>\n\t\t<title>\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Output::i()->getTitle( $title ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/title>\n\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"core\", 'global' )->includeMeta(  );\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"core\", 'global' )->includeCSS(  );\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\nif ( \\IPS\\Theme::i()->settings['js_include'] != 'footer' ):\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"core\", 'global' )->includeJS(  );\nendif;\n$return .= <<<CONTENT\n\n\t<\/head>\n\t<body class=\"ipsApp ipsPad ipsClearfix ipsLayout_container\" id='elMenuManagerPreview_body'>\n\t\t<div id=\"ipsLayout_header\">\n\t\t\t<header>\n\t\t\t<\/header>\n\t\t<\/div>\n\t\t{$html}\n\t\t<main>\n\t\t\t<div id=\"ipsLayout_contentArea\">\n\t\t\t\t<div id=\"ipsLayout_contentWrapper\">\t\t\t\t\t\n\t\t\t\t\t<div id=\"ipsLayout_mainArea\">\n\t\t\t\t\t\t<p class='ipsType_center ipsType_normal ipsType_light'>\n\t\t\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'menu_manager_preview_note', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<\/p>\n\t\t\t\t\t<\/div>\n\t\t\t\t<\/div>\n\t\t\t<\/div>\n\t\t<\/main>\n\t\t\nCONTENT;\n\nif ( \\IPS\\Theme::i()->settings['js_include'] == 'footer' ):\n$return .= \\IPS\\Theme::i()->getTemplate( \"global\", \"core\", 'global' )->includeJS(  );\nendif;\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\n$return .= \\IPS\\Output::i()->endBodyCode;\n$return .= <<<CONTENT\n\n\t<\/body>\n<\/html>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction schemaConflict( $name, $diff ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\n<p class=\"ipsMessage ipsMessage_error\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'database_conflict_message', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/p>\n\n<div class=\"acpBlock\">\n\t<div class=\"acpBlock_title\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'database_conflict_title', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/div>\n\t<table class=\"ipsTable diff\">\n\t\t<tr>\n\t\t\t<th>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'database_conflict_schema', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/th>\n\t\t\t<th>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'database_conflict_local', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/th>\n\t\t<\/tr>\n\t<\/table>\n\t{$diff}\n\t<div class=\"ipsAreaBackground_light ipsPad\">\n\t\t<div class='ipsGrid'>\n\t\t\t<div class='ipsGrid_span6'>\n\t\t\t\t<a href='\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=applications&controller=developer&appKey=\", null, \"\", array(), 0 ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Request::i()->appKey, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n&do=resolveSchemaConflicts&local=0&_name=\nCONTENT;\n$return .= htmlspecialchars( $name, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' class='ipsButton ipsButton_primary' data-delete-confirm=\"\">\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'database_conflict_choose', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t<\/div>\n\t\t\t<div class='ipsGrid_span6'>\n\t\t\t\t<a href='\nCONTENT;\n\n$return .= str_replace( '&', '&amp;', \\IPS\\Http\\Url::internal( \"app=core&module=applications&controller=developer&appKey=\", null, \"\", array(), 0 ) );\n$return .= <<<CONTENT\n\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\Request::i()->appKey, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n&do=resolveSchemaConflicts&local=1&_name=\nCONTENT;\n$return .= htmlspecialchars( $name, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' class='ipsButton ipsButton_primary'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'database_conflict_choose', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/a>\n\t\t\t<\/div>\n\t\t<\/div>\n\t<\/div>\n<\/div>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction themeHookEditor( $bits, $hookData, $hookId, $template, $tabbedContent, $url ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n<section class='ipsPad_half ipsAreaBackground' id='elSkinHookEditor' data-controller='core.admin.system.themeHookEditor'>\n\t<div class=\"ipsColumns ipsColumns_collapsePhone\">\n\t\t<div class=\"ipsColumn ipsColumn_wide\" data-role=\"themeHookSidebar\">\n\t\t\t<div class=\"cHookEditor_sidebar ipsSideMenu ipsScrollbar\">\n\t\t\t\t<ul class=\"ipsSideMenu_list\">\n\t\t\t\t\t\nCONTENT;\n\nforeach ( $bits as $k => $data ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t<li class=\"ipsSideMenu_item \nCONTENT;\n\nif ( $template == $k ):\n$return .= <<<CONTENT\nipsSideMenu_itemActive\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\">\n\t\t\t\t\t\t\t<a class=\"\nCONTENT;\n\nif ( $template == $k ):\n$return .= <<<CONTENT\ncHookEditor_activeTemplate\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\" href='\nCONTENT;\n$return .= htmlspecialchars( $url->setQueryString( 'do', 'editHook' )->setQueryString( 'template', $k ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n' data-action=\"templateLink\">\n\t\t\t\t\t\t\t\t\nCONTENT;\n$return .= htmlspecialchars( $k, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nif ( isset( $hookData[ $k ] ) AND count( $hookData[ $k ] ) ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t\t\t<span class='ipsCommentCount ipsPos_right'>\nCONTENT;\n\n$return .= htmlspecialchars( count( $hookData[ $k ] ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/span>\n\t\t\t\t\t\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\t\t\t\t\t<\/a>\n\t\t\t\t\t\t<\/li>\n\t\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t\t<\/ul>\n\t\t\t<\/div>\n\t\t<\/div>\n\t\t<div class=\"ipsColumn ipsColumn_fluid\" data-role=\"themeHookWindow\">\n\t\t\t\nCONTENT;\n\nif ( $template  ):\n$return .= <<<CONTENT\n\n\t\t\t\t<div class='cHookEditor_content' data-template='\nCONTENT;\n$return .= htmlspecialchars( $template, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n'>\n\t\t\t\t\t{$tabbedContent}\n\t\t\t\t<\/div>\n\t\t\t\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t\t\t\t<div class=\"ipsType_center ipsType_large ipsEmpty\" data-role=\"themeHookWindowPlaceholder\">\n\t\t\t\t\t<i class=\"fa fa-cogs\"><\/i>\n\t\t\t\t<\/div>\n\t\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t<\/div>\n\t<\/div>\n<\/section>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction themeHookEditorTree( $node ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n\nCONTENT;\n\nif ( $node->nodeType === XML_TEXT_NODE or $node->nodeType === XML_CDATA_SECTION_NODE ):\n$return .= <<<CONTENT\n\n\t\nCONTENT;\n\nif ( trim( $node->wholeText ) !== '' ):\n$return .= <<<CONTENT\n\n\t\t<li><span data-unselectable>\nCONTENT;\n$return .= htmlspecialchars( $node->wholeText, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n<\/span><\/li>\n\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\nCONTENT;\n\nelseif ( $node->nodeType === XML_COMMENT_NODE ):\n$return .= <<<CONTENT\n\n\t<li><span data-unselectable>&lt;!-- ... --&gt;<\/span><\/li>\n\nCONTENT;\n\nelseif ( $node->nodeName === 'if' or $node->nodeName === 'foreach' or $node->nodeName === 'for' or $node->nodeName === 'else' ):\n$return .= <<<CONTENT\n\n\t<li>\n\t\t<span data-unselectable>{\\0{\\0\nCONTENT;\n$return .= htmlspecialchars( $node->nodeName, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\nCONTENT;\n\nif ( $node->nodeName !== 'else' ):\n$return .= <<<CONTENT\n \nCONTENT;\n$return .= htmlspecialchars( $node->attributes->getNamedItem('code')->nodeValue, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\\0}\\0}<\/span>\n\t\t\nCONTENT;\n\nif ( $node->hasChildNodes() ):\n$return .= <<<CONTENT\n\n\t\t\t<ul>\n\t\t\t\t\nCONTENT;\n\nforeach ( $node->childNodes as $child ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"applications\", \\IPS\\Request::i()->app )->themeHookEditorTree( $child );\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t<\/ul>\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t<span data-unselectable>{\\0{\\0end\nCONTENT;\n$return .= htmlspecialchars( $node->nodeName, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\\0}\\0}<\/span>\n\t<\/li>\n\nCONTENT;\n\nelse:\n$return .= <<<CONTENT\n\n\t<li data-selector=\"\nCONTENT;\n\n$return .= htmlspecialchars( \\IPS\\core\\modules\\admin\\applications\\plugins::getSelector( $node ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\">\n\t\t\nCONTENT;\n\nif ( $node->nodeName != 'ipscontent' ):\n$return .= <<<CONTENT\n\n\t\t\t<span data-selectable>&lt;\nCONTENT;\n\n$return .= htmlspecialchars( preg_replace( '\/^(x_)?([a-z]+)(_x)?$\/i', '$2', $node->nodeName ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\nCONTENT;\n\nif ( $node->hasAttributes() ):\n$return .= <<<CONTENT\n\nCONTENT;\n\nfor ( $i = 0; $i < $node->attributes->length; ++$i ):\n$return .= <<<CONTENT\n \nCONTENT;\n$return .= htmlspecialchars( $node->attributes->item( $i )->nodeName, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n=\"\nCONTENT;\n$return .= htmlspecialchars( $node->attributes->item( $i )->nodeValue, ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n\"\nCONTENT;\n\nendfor;\n$return .= <<<CONTENT\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n&gt;<\/span>\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\nif ( $node->hasChildNodes() ):\n$return .= <<<CONTENT\n\n\t\t\t<ul>\n\t\t\t\t\nCONTENT;\n\nforeach ( $node->childNodes as $child ):\n$return .= <<<CONTENT\n\n\t\t\t\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"applications\", \\IPS\\Request::i()->app )->themeHookEditorTree( $child );\n$return .= <<<CONTENT\n\n\t\t\t\t\nCONTENT;\n\nendforeach;\n$return .= <<<CONTENT\n\n\t\t\t<\/ul>\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t\t\nCONTENT;\n\nif ( $node->nodeName != 'ipscontent' ):\n$return .= <<<CONTENT\n\n\t\t\t<span data-selectable>&lt;\/\nCONTENT;\n\n$return .= htmlspecialchars( preg_replace( '\/^(x_)?([a-z]+)(_x)?$\/i', '$2', $node->nodeName ), ENT_QUOTES | ENT_DISALLOWED, 'UTF-8', FALSE );\n$return .= <<<CONTENT\n&gt;<\/span>\n\t\t\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\n\t<\/li>\n\nCONTENT;\n\nendif;\n$return .= <<<CONTENT\n\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction themeHookEditorTreeRoot( $tree ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n<div class='cHookEditor_tree'>\n\t<ul>\n\t\t\nCONTENT;\n\n$return .= \\IPS\\Theme::i()->getTemplate( \"applications\", \\IPS\\Request::i()->app )->themeHookEditorTree( $tree );\n$return .= <<<CONTENT\n\n\t<\/ul>\n<\/div>\nCONTENT;\n\n\t\treturn $return;\n}\n\n\tfunction versionFormField(  ) {\n\t\t$return = '';\n\t\t$return .= <<<CONTENT\n\n<div class='ipsGrid ipsGrid_collapsePhone'>\n\t<div class='ipsGrid_span6'>\n\t\t<input type='text' name='app_versions[0]' id='app_version_human' required aria-required='true' placeholder=\"1.0.0\" size=\"10\">\n\t\t<br \/>\n\t\t<span class='ipsFieldRow_desc'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'add_app_version_ph', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/span>\n\t<\/div>\n\t<div class='ipsGrid_span6'>\n\t\t<input type='text' name='app_versions[1]' id='app_version_long' required aria-required='true' placeholder=\"100000\" size=\"8\" maxlength=\"8\">\n\t\t<br \/>\n\t\t<span class='ipsFieldRow_desc'>\nCONTENT;\n\n$return .= \\IPS\\Member::loggedIn()->language()->addToStack( htmlspecialchars( 'add_app_versionl_ph', ENT_DISALLOWED, 'UTF-8', FALSE ), TRUE, array(  ) );\n$return .= <<<CONTENT\n<\/span>\n\t<\/div>\n<\/div>\n\nCONTENT;\n\n\t\treturn $return;\n}}"
VALUE;
